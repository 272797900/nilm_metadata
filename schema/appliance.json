{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "id": "https://raw.github.com/nilmtk/nilm_metadata/master/schema/appliance.json",
    "title": "Appliance",
    "description": "Metadata for an Appliance",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "name": { "type": "string" },
        "parent": { "type": "string" },
        "instance": { "$ref": "instance.json" },
        "room": { "$ref": "room.json" },
        "meter_ids": { 
            "type": "array", 
            "items": { "$ref": "instance.json" },
            "unique": true,
            "description": "An array of the meter ID(s) used to monitor this appliance."
        },
        "dates_active": {
            "type": "array",
            "items": { "$ref": "timeframe.json" }
        },
        "description": { "type": "string" },
        "manufacturer": { "type": "string" },
        "model": { "type": "string" },
        "type": { "type": "string" },
        "subtype": { "type": "string" },
        "count": { "type": "integer", "description": "number of instances of this component.  Only used when this appliance is used as a component of an appliance." },
        "part_number": { "type": "string" },
        "gtin": { 
            "type": "integer", 
            "description": "http://en.wikipedia.org/wiki/Global_Trade_Item_Number" 
        },
        "categories": { 
            "type": "object",
            "properties": {
                "traditional": {
                    "enum": [ "wet", "cold", "consumer electronics", "ICT", 
                              "cooking", "heating", "lighting" ]
                },
                "electrical": {
                    "enum": [ "general incandescent lamps", "halogen lamps",
                              "compact fluorescent lamps", 
                              "linear fluorsecent lamps", "LED" ],
                    "description": "From Tsagarakid, Collin & Kiprakis 2013"
                },
                "size": { "enum": [ "small", "large" ] },
                "google_shopping": {
                    "enum": [ "TODO" ]
                },
                "HES": {
                    "enum": [ "TODO" ]
                },
                "TO CONVERT": {
                    "enum": [
                        "small", "large",
                        
                        "cooking", "washing/drying", "cold", "hot", "wet",
                        "climate control",
                        "space heating", "space cooling", 
                        "water heating", "showers",
                        "lighting",

                        "ict", "computers", "entertainment", "office",
                        
                        "tools", "other"
                    ]                    
                }
            }
        },
        "on_power_threshold": { 
            "type": "number", 
            "description": "watts", 
            "minimum": 0
        },
        "minimum_off_duration": { "type": "number", "description": "seconds" },
        "minimum_on_duration": { "type": "number", "description": "seconds" },
        "control": { 
            "type": "object",
            "additionalProperties": { 
                "type": "array",
                "items": {
                    "enum": [ 
                        "timer", "manual", "motion sensor", "light sensor",
                        "temperature sensor" ] 
                }
            },
            "description": "Give a list of all control methods which apply.  For example, a video recorder would be both 'manual' and 'timer'."
        },
        "energy_rating": { "type": "string" },
        "nominal_consumption": {             
            "type": "object",
            "properties": {
                "on_power": {
                    "type": "number",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "active power in watts when on" 
                },
                "standby_power": {
                    "type": "number",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "active power in watts when in standby" 
                },
                "energy_per_year": {
                    "type": "number",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "kWh per year" 
                },
                "energy_per_cycle": {
                    "type": "number",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "kWh per cycle" 
                }
            }
        },
        "images": { 
            "type": "array", 
            "items": { "type": "string", "format": "uri" } 
        },
        "components": { "$ref": "appliance_group.json" },
        "distributions": {
            "type": "object",
            "description": "Distributions of the data expressed as normalised frequencies over discrete intervals (bins).",
            "properties": {
                "on_power": {
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "bin_edges in units of watts" }
                    ]
                },
                "on_duration": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "bin_edges in units of seconds" }
                    ]
                },
                "off_duration": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "bin_edges in units of seconds" }
                    ]
                },
                "usage_hour_per_day": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "bin_edges = [0,1,2,...,24]" }
                    ]
                },
                "usage_day_per_week": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "categories = ['mon', 'tue', ..., 'sun']" }
                    ]
                },
                "usage_month_per_year": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "bin_edges are in units of days (we need bin edges because months are not equal lengths).  The first bin represents January." }
                    ]
                },
                "rooms": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "Categorical distribution over the rooms where this appliance is likely to be used. e.g. for a fridge this might be 'kitchen:0.9, garage:0.1'" }
                    ]
                },
                "appliance_correlations": { 
                    "allOf": [
                        { "$ref": "#/definitions/array_of_priors" },
                        { "description": "list of other appliances. Probability of this appliance being on given that the other appliance is on. e.g. 'tv:0.1, amp:0.4, ...' means that there is a 10% probability of this appliance being on if the TV is on.  Each category name can either be just an appliance name (e.g. 'fridge') or <appliance name>,<appliance instance> e.g. 'fridge,1'" }
                    ]
                }
            }
        }
    },
    "components": {
        "screen": {
            "type": "object",
            "properties": {
                "diagonal_size": { 
                    "type": "number",
                    "description": "diagonal size in inches",
                    "minimum": 0,
                    "exclusiveMinimum": true
                },
                "max_resolution": { 
                    "type": "object",
                    "properties": {
                        "horizontal": { "type": "integer" },
                        "vertical": { "type": "integer" }
                    }
                },
                "display_format": { 
                    "type": "string", 
                    "description": "e.g. <1080p,PAL,NTSC,1080i> etc." 
                },
                "max_refresh_rate": { "type": "number", "description": "Hz" },
                "display_technology": { 
                    "enum": [
                        "crt", "lcd", "plasma", "oled", "projector" ] 
                },
                "backlight_technology": { "enum": ["led", "cold cathode"] }
            }
        },
        "av_sources": {
            "type": "array",
            "items": { 
                "enum": [
                    "digital tv", "analogue tv",
                    "videodisc", "cd", "dvr", "dvd", "blu-ray",
                    "tape",
                    "analogue radio", "digital radio", 
                    "satellite", "cable", "broadband", "fibre"
                ]
            }
        },
        "cooking": {
            "type": "object",
            "properties": {
                "name": { "enum": [ "oven", "hob", "grill" ] },
                "fuel": { "$ref": "#/definitions/fuel" },
                "fan": { "type": "boolean" }
            }
        }
    },
    "definitions": {
        "array_of_priors": {
            "type": "array",
            "items": { "$ref": "prior.json" }
        },
        "fuel": { 
            "enum": [ 
                "electricity", "gas", "oil", "coal", "wood", "biomass" 
            ] 
        }
    }
}
