{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "id": "https://raw.github.com/nilmtk/nilm_metadata/master/schema/appliance.json",
    "title": "Appliance",
    "description": "Metadata for a Appliances",
    "type": "object",
    "allOf": [
        { "properties": {
            "instance": { "$ref": "instance.json" },
            "room": { "$ref": "room.json" },
            "meters": { 
                "type": "array", 
                "items": { "$ref": "meter.json" },
                "unique": true 
            },
            "on_power_threshold": { 
                "type": "number", 
                "description": "watts", 
                "minimum": 0
            },
            "min_off_duration": { "format": "time", "type": "string" },
            "min_on_duration": { "format": "time", "type": "string" }
        },
          "required": ["name"],
          "additionalProperties": true
        },
        { "oneOf": [
            {"$ref": "#/subclasses/fridge"}
        ]
        }
    ],
    "subclasses": {
        "fridge": {
            "properties": {
                "name": { "enum": ["fridge", "fridge-freezer", "freezer"] },
                "category": { "enum": ["cold"] },
                "type": { "enum": ["upright", "chest", "american"] },
                "freezer_is_separate_thermal_zone": { "type": "boolean" }
            }            
        }
    }
}
