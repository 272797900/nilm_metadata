{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "id": "https://raw.github.com/nilmtk/nilm_metadata/master/schema/appliance.json",
    "title": "Appliance",
    "description": "Metadata for a Appliances",
    "type": "object",
    "allOf": [
        { 
            "_comments": "------PROPERTIES COMMON TO ALL APPLIANCES----------",
            "properties": {
                "instance": { "$ref": "instance.json" },
                "room": { "$ref": "room.json" },
                "meters": { 
                    "type": "array", 
                    "items": { "$ref": "instance.json" },
                    "unique": true 
                },
                "on_power_threshold": { 
                    "type": "number", 
                    "description": "watts", 
                    "minimum": 0
                },
                "min_off_duration": { "format": "time", "type": "string" },
                "min_on_duration": { "format": "time", "type": "string" },
                "category": { "type": "string" }
            },
            "required": ["name"],
        },
        { 
            "oneOf": [
                { "$ref": "#/subclasses/fridge" },
                { "$ref": "#/subclasses/screen" },
                { "$ref": "#/subclasses/projector" }
            ]
        }
    ],
    "subclasses": {

        "fridge": {   
            "properties": {
                "name": { "enum": ["fridge", "fridge_freezer", "freezer"] },
                "type": { "enum": ["upright", "chest", "american"] },
                "freezer_is_separate_thermal_zone": { "type": "boolean" }
            }
        },

        "screen": {   
            "properties": {
                "name": { "enum": ["tv", "computer_monitor"] },
                "screen_size": { 
                    "type": "number",
                    "description": "diagonal size in inches",
                    "minimum": 0,
                    "exclusiveMinimum": true
                }
            }
        },

        "projector": {
            "properties": {
                "name": { "enum": ["projector"] },
            }
        }
    }
}
